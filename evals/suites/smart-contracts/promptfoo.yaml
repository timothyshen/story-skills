description: 'Smart Contracts Skill Evaluation'

prompts:
  - file://prompt-wrapper.txt

providers:
  - id: anthropic:claude-sonnet-4-5-20250929
    config:
      temperature: 0
      max_tokens: 4096

defaultTest:
  options:
    timeout: 120000
  vars:
    skill_content: file://../../../story-contracts/SKILL.md
    contract_addresses: file://../../../story-contracts/references/contract-addresses.md
    core_contracts: file://../../../story-contracts/references/core-contracts.md
    spg_workflows: file://../../../story-contracts/references/spg-workflows.md

tests:
  - vars:
      case_content: file://cases/register-ip-solidity.md
    assert:
      - type: llm-rubric
        value: file://rubrics/contract-correctness.txt
        threshold: 0.85
        provider: anthropic:claude-sonnet-4-5-20250929
      - type: contains
        value: 'IPAssetRegistry'
      - type: contains
        value: '0x77319B4031e6eF1250907aa00018B8B1c67a244b'

  - vars:
      case_content: file://cases/foundry-testing.md
    assert:
      - type: llm-rubric
        value: file://rubrics/testing-completeness.txt
        threshold: 0.85
        provider: anthropic:claude-sonnet-4-5-20250929
      - type: contains
        value: 'forge test'
      - type: contains
        value: '--fork-url'

  - vars:
      case_content: file://cases/access-control.md
    assert:
      - type: llm-rubric
        value: file://rubrics/access-control-understanding.txt
        threshold: 0.85
        provider: anthropic:claude-sonnet-4-5-20250929
      - type: contains
        value: 'AccessController'
      - type: contains
        value: 'setPermission'
